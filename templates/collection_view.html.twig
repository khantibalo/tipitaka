{% extends 'base.html.twig' %}
{% set page='toc' %}
{% block title %}
{{ collection.name }}
{% endblock %}

{% block stylesheets %}
<style>
.spoiler {
  display: none;
}

.show {
  display: none; 
}

.hide:target + .show {
  display: inline; 
}

.hide:target {
  display: none; 
}

.hide:target ~ .spoiler {
  display: inline;
}

.btn
{
font-size:14pt;
}
</style>
{% endblock %}
{% block content %}
{% set tocPage='collections' %}
{{ include(app.request.cookies.get('mobile')=='1' ? '_toc_navigation_mobile.html.twig' : '_toc_navigation.html.twig') }}
{% if collection.notes is defined%}
{{ collection.notes|raw }}
{% endif %}
{% if form is defined %}
<b>{% trans %}Print view{% endtrans %}</b> <a href="#hide" class="hide btn" id="hide">{% trans %}show{% endtrans %}</a><a href="#show" class="show btn" id="show">{% trans %}hide{% endtrans %}</a>
<div class="spoiler">
{{ form_start(form,{'attr' : {'style' : 'display: inline'}}) }}
<table>
<tr><td colspan="2">
{{ form_widget(form.shownav) }}<small>{{ form_label(form.shownav, 'ShowNav') }}</small></td>
</tr>
<tr><td>
{% trans %}Format{% endtrans %}:
</td>
<td>
{{ form_widget(form.rendermode[0]) }}<small>{{ form_label(form.rendermode[0], 'display print view') }}</small><br>
{{ form_widget(form.rendermode[1]) }}<small>{{ form_label(form.rendermode[1], 'download print view html') }}</small><br>
</td>
</tr>
<tr>
<td>
{% trans %}Layout{% endtrans %}:
</td>
<td>
{{ form_widget(form.layout[0]) }}<small>{{ form_label(form.layout[0], 'PrintViewTableDesc') }}</small><br>
{{ form_widget(form.layout[1]) }}<small>{{ form_label(form.layout[1], 'PrintViewPaperDesc') }}</small><br>
{{ form_widget(form.layout[2]) }}<small>{{ form_label(form.layout[2], 'PrintViewTranslationDesc') }}</small><br>
<td>
</td>
</table>
{{ form_row(form.submit,{'label': 'Submit','attr' : {'style' : 'font-size:14pt'}}) }}
{{ form_end(form) }}
<hr>
</div>
{% endif %}

<div><a href="{{ path('collections_list') }}">{% trans %}Top{% endtrans %}</a></div>
<ul style="margin-top:0px{{ app.request.cookies.get('mobile')=='1' ? ';padding-left:20px' : '' }}">
<li><a href="{{ path('collection_view',{collectionid: collection.collectionitemid}) }}">{{ collection.name }}</a>
{% if is_granted(editorRole) %}   
<a href="{{ path('collection_edit',{itemid: collection.collectionitemid}) }}">({% trans %}Edit{% endtrans %})</a>	
<a href="{{ path('collection_item_names',{itemid: collection.collectionitemid}) }}">({% trans %}Edit names{% endtrans %})</a>
<a href="{{ path('collection_folder_edit',{parentid: collection.collectionitemid}) }}">({% trans %}Add folder{% endtrans %})</a>
<a href="{{ path('collection_item_edit',{parentid: collection.collectionitemid}) }}">({% trans %}Add item{% endtrans %})</a>
{% endif %} 
{% set divOffset=app.request.cookies.get('mobile')=='1' ? 20 : 30 %}
	{% for item in collectionItems|filter(ci=>ci.parentid==collection.collectionitemid) %}
		{% if item.level==1 %}<ul style="list-style-type: square;"><li>{% else %}
		<div style="padding-left:{{ item.level*divOffset }}px">
		{% endif %}
			{% if item.nodeid %}		        
		        <a href="{{ path('collection_item_view', {collectionitemid: item.collectionitemid}) }}">{{ item.colItemName ?? (item.nodeName ?? item.title) }}</a>
			{% else %} 
				{{ item.colItemName }}
			{% endif %}
			{% if is_granted(editorRole) %}   
			{{ item.vieworder }}
			<a href="{{ path(item.nodeid ? 'collection_item_edit' : 'collection_folder_edit',{itemid: item.collectionitemid}) }}">({% trans %}Edit{% endtrans %})</a>
			<a href="{{ path('collection_item_names',{itemid: item.collectionitemid}) }}">({% trans %}Edit names{% endtrans %})</a>	
			{% endif %} 
		{% if item.level==1 %}</li></ul>{% else %}
		</div>
		{% endif %}
	{% endfor %}
</li>
</ul>
{% endblock %}